タイピング練習テンプレート 解説（HTML / CSS / JavaScript）

目的
  - HTML/CSS/JavaScript を学ぶための「最小構成のタイピング練習サイト」です。
  - ブラウザだけで動きます（サーバーやライブラリ不要）。

ファイル構成
  - index.html
      画面に出す部品（UI）を置く。ボタン、設定、問題文、結果など。
  - style.css
      見た目（色、余白、フォント、強調表示）を決める。
  - script.js
      キーボード入力を受け取り、正誤判定し、画面を更新する。

------------------------------------------------------------
1) HTML の仕組み（index.html）

ポイント
  - <select> で「問題セット」を選べるようにする
  - <button> で「開始」「次の問題」「リセット」を用意する
  - <p id="target"> に問題文を表示する
  - 成績表示の場所を用意しておき、JavaScript から数字を書き換える

よく使う考え方
  - id は JavaScript が探しやすい「目印」になる
  - aria-label / aria-live はアクセシビリティ向上に役立つ

------------------------------------------------------------
2) CSS の仕組み（style.css）

ポイント
  - :root に色などの変数（--bg など）を集める
  - .panel でカード風の見た目（背景、枠線、影）を作る
  - .ch.done / .ch.next / .ch.todo で 1文字ずつ色や枠を変える

なぜ 1文字ずつ <span> を作るのか
  - 「今打つべき文字（next）」だけ枠で強調したい
  - 「打ち終えた部分（done）」を緑にしたい
  - 文章全体を1つのテキストのままだと、部分的な装飾が難しい

------------------------------------------------------------
3) JavaScript の仕組み（script.js）

全体の流れ（イベント駆動）
  - ブラウザはユーザー操作（キー入力、クリック）が起きた時だけ JavaScript を呼ぶ
  - 呼ばれた関数が state（状態）を更新し、render() で画面を作り直す

3-1) TEXT_SETS（問題文のデータ）
  - TEXT_SETS は「モード名 → 問題文の配列」の辞書
  - 例: basicEn の配列に文章を追加すると、その文章がランダムで出る

3-2) ui（画面部品の参照）
  - document.getElementById(...) で HTML の要素を取得している
  - 毎回探すと遅くなるので、最初に ui にまとめておく

3-3) state（状態）
  - mode: どの問題セットか
  - text: 今の問題文（文字列）
  - index: 何文字目まで正解したか（カーソル位置）
  - correct / wrong / totalTyped: 成績用のカウンタ
  - startedAtMs / endedAtMs: タイマー用の時刻

「状態」を1か所にまとめる理由
  - どこまで打てたか、何回ミスしたか等が散らばるとバグが増える
  - state を更新→render で表示、という形にすると追いやすい

3-4) handleKeydown（キー入力で進む）
  - window.addEventListener("keydown", handleKeydown) でキー入力を受け取る
  - expected = state.text[state.index] が「次に打つべき1文字」
  - typed = e.key が「実際に押されたキー」
  - 期待文字と一致したら index を 1進める
  - ずれたら wrong を増やして、見た目を一瞬赤くする（flashMistake）

3-5) render（画面の更新）
  - renderTarget():
      state.text を1文字ずつ span にして target に追加する
      i < index は done、i === index は next、それ以外は todo
  - renderStats():
      時間/正解/ミス/正確率 の表示を更新する

3-6) 結果（WPM / CPM）
  - CPM: 1分あたりの正解文字数（correct / 秒 * 60）
  - WPM: 1単語=5文字として換算（correct / 5 / 秒 * 60）
  - finishRound() でタイマーを止め、結果パネルを表示する

------------------------------------------------------------
4) 改造アイデア（勉強用）

  - 制限時間モード（60秒で強制終了）
  - 苦手キー分析（どの文字でミスが多いかを集計）
  - スコア履歴を localStorage に保存
  - ローマ字入力（例: 「し」→ shi/si など）に対応
  - 問題文を外部 JSON から読み込み（fetch を使う）

------------------------------------------------------------
5) 動かし方

  - index.html をブラウザで開くだけで動きます。
  - もし同一フォルダ内で相対パスが崩れる場合は、簡単なHTTPサーバーで開くと安定します。

